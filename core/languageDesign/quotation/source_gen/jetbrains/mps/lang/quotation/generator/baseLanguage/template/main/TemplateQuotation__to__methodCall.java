package jetbrains.mps.lang.quotation.generator.baseLanguage.template.main;

/*Generated by MPS */

import jetbrains.mps.generator.runtime.TemplateDeclarationWeavingAware;
import jetbrains.mps.smodel.SNodePointer;
import jetbrains.mps.smodel.SNode;
import org.jetbrains.annotations.NotNull;
import jetbrains.mps.generator.runtime.TemplateExecutionEnvironment;
import jetbrains.mps.generator.runtime.TemplateContext;
import jetbrains.mps.generator.runtime.GenerationException;
import java.util.List;
import java.util.ArrayList;
import jetbrains.mps.generator.template.SourceSubstituteMacroNodesContext;
import java.util.Collection;
import jetbrains.mps.generator.template.SourceSubstituteMacroNodeContext;
import jetbrains.mps.generator.runtime.TemplateUtil;
import jetbrains.mps.generator.template.IfMacroContext;
import jetbrains.mps.smodel.SReference;
import jetbrains.mps.smodel.SModelReference;
import jetbrains.mps.smodel.SNodeId;
import jetbrains.mps.generator.template.PropertyMacroContext;
import java.util.Collections;
import jetbrains.mps.generator.runtime.ReferenceResolver;
import jetbrains.mps.generator.template.ReferenceMacroContext;

public class TemplateQuotation__to__methodCall implements TemplateDeclarationWeavingAware {
  private static SNodePointer templateNode_g7vjva_a0a0a1a1 = new SNodePointer("r:00000000-0000-4000-0000-011c8959034c(jetbrains.mps.lang.quotation.generator.baseLanguage.template.main@generator)", "9181472308624882621");
  private static SNodePointer templateNode_g7vjva_a0a0a1a4a1a1 = new SNodePointer("r:00000000-0000-4000-0000-011c8959034c(jetbrains.mps.lang.quotation.generator.baseLanguage.template.main@generator)", "9181472308624882629");
  private static SNodePointer templateNode_g7vjva_a0a0a1a3a1a4a1a1 = new SNodePointer("r:00000000-0000-4000-0000-011c8959034c(jetbrains.mps.lang.quotation.generator.baseLanguage.template.main@generator)", "9181472308624882630");
  private static SNodePointer templateNode_g7vjva_a0a0a1a3a1a3a1a4a1a1 = new SNodePointer("r:00000000-0000-4000-0000-011c8959034c(jetbrains.mps.lang.quotation.generator.baseLanguage.template.main@generator)", "2877154273341383804");
  private static SNodePointer templateNode_g7vjva_a0a0a1a4a1a4a1a1 = new SNodePointer("r:00000000-0000-4000-0000-011c8959034c(jetbrains.mps.lang.quotation.generator.baseLanguage.template.main@generator)", "9181472308624882632");
  private static SNodePointer loopMacroRef_g7vjva_a0a0a1a4a1a4a1a4a1a1 = new SNodePointer("r:00000000-0000-4000-0000-011c8959034c(jetbrains.mps.lang.quotation.generator.baseLanguage.template.main@generator)", "9181472308624882634");
  private static SNodePointer copySrcMacro_g7vjva_a0a0a3a2a2a1a4a1a4a1a4a1a1 = new SNodePointer("r:00000000-0000-4000-0000-011c8959034c(jetbrains.mps.lang.quotation.generator.baseLanguage.template.main@generator)", "9181472308624882684");
  private static SNodePointer ifMacroRef_g7vjva_a0a0a1a5a1a1 = new SNodePointer("r:00000000-0000-4000-0000-011c8959034c(jetbrains.mps.lang.quotation.generator.baseLanguage.template.main@generator)", "1419698836134220560");
  private static SNodePointer templateNode_g7vjva_a0a0a1a2a1a5a1a1 = new SNodePointer("r:00000000-0000-4000-0000-011c8959034c(jetbrains.mps.lang.quotation.generator.baseLanguage.template.main@generator)", "937236280924642824");
  private static SNodePointer templateNode_g7vjva_a0a0a1a4a1a2a1a5a1a1 = new SNodePointer("r:00000000-0000-4000-0000-011c8959034c(jetbrains.mps.lang.quotation.generator.baseLanguage.template.main@generator)", "937236280924642838");
  private static SNodePointer templateNode_g7vjva_a0a0a1a4a1a4a1a2a1a5a1a1 = new SNodePointer("r:00000000-0000-4000-0000-011c8959034c(jetbrains.mps.lang.quotation.generator.baseLanguage.template.main@generator)", "937236280924642839");
  private static SNodePointer templateNode_g7vjva_a0a0a1a3a1a4a1a4a1a2a1a5a1a1 = new SNodePointer("r:00000000-0000-4000-0000-011c8959034c(jetbrains.mps.lang.quotation.generator.baseLanguage.template.main@generator)", "937236280924642840");
  private static SNodePointer templateNode_g7vjva_a0a0a1a3a1a3a1a4a1a4a1a2a1a5a1a1 = new SNodePointer("r:00000000-0000-4000-0000-011c8959034c(jetbrains.mps.lang.quotation.generator.baseLanguage.template.main@generator)", "937236280924642841");
  private static SNodePointer templateNode_g7vjva_a0a0a1a4a1a3a1a3a1a4a1a4a1a2a1a5a1a1 = new SNodePointer("r:00000000-0000-4000-0000-011c8959034c(jetbrains.mps.lang.quotation.generator.baseLanguage.template.main@generator)", "937236280924642842");
  private static SNodePointer templateNode_g7vjva_a0a0a1a5a1a3a1a3a1a4a1a4a1a2a1a5a1a1 = new SNodePointer("r:00000000-0000-4000-0000-011c8959034c(jetbrains.mps.lang.quotation.generator.baseLanguage.template.main@generator)", "937236280924642843");
  private static SNodePointer templateNode_g7vjva_a0a0a1a4a1a4a1a4a1a2a1a5a1a1 = new SNodePointer("r:00000000-0000-4000-0000-011c8959034c(jetbrains.mps.lang.quotation.generator.baseLanguage.template.main@generator)", "937236280924642844");
  private static SNodePointer ifMacroRef_g7vjva_a0a0a1a3a1a4a1a4a1a4a1a2a1a5a1a1 = new SNodePointer("r:00000000-0000-4000-0000-011c8959034c(jetbrains.mps.lang.quotation.generator.baseLanguage.template.main@generator)", "937236280924642851");
  private static SNodePointer templateNode_g7vjva_a0a0a1a2a1a3a1a4a1a4a1a4a1a2a1a5a1a1 = new SNodePointer("r:00000000-0000-4000-0000-011c8959034c(jetbrains.mps.lang.quotation.generator.baseLanguage.template.main@generator)", "937236280924642845");
  private static SNodePointer templateNode_g7vjva_a0a0a1a4a1a2a1a3a1a4a1a4a1a4a1a2a1a5a1a1 = new SNodePointer("r:00000000-0000-4000-0000-011c8959034c(jetbrains.mps.lang.quotation.generator.baseLanguage.template.main@generator)", "937236280924642846");
  private static SNodePointer templateNode_g7vjva_a0a0a1a4a1a4a1a2a1a3a1a4a1a4a1a4a1a2a1a5a1a1 = new SNodePointer("r:00000000-0000-4000-0000-011c8959034c(jetbrains.mps.lang.quotation.generator.baseLanguage.template.main@generator)", "937236280924642847");
  private static SNodePointer templateNode_g7vjva_a0a0a1a5a1a2a1a3a1a4a1a4a1a4a1a2a1a5a1a1 = new SNodePointer("r:00000000-0000-4000-0000-011c8959034c(jetbrains.mps.lang.quotation.generator.baseLanguage.template.main@generator)", "937236280924642848");
  private static SNodePointer templateNode_g7vjva_a0a0a1a3a1a5a1a2a1a3a1a4a1a4a1a4a1a2a1a5a1a1 = new SNodePointer("r:00000000-0000-4000-0000-011c8959034c(jetbrains.mps.lang.quotation.generator.baseLanguage.template.main@generator)", "937236280924642849");
  private static SNodePointer templateNode_g7vjva_a0a0a1a4a1a3a1a5a1a2a1a3a1a4a1a4a1a4a1a2a1a5a1a1 = new SNodePointer("r:00000000-0000-4000-0000-011c8959034c(jetbrains.mps.lang.quotation.generator.baseLanguage.template.main@generator)", "937236280924642850");
  private static SNodePointer loopMacroRef_g7vjva_a0a0a1a5a1a4a1a4a1a2a1a5a1a1 = new SNodePointer("r:00000000-0000-4000-0000-011c8959034c(jetbrains.mps.lang.quotation.generator.baseLanguage.template.main@generator)", "937236280924642873");
  private static SNodePointer templateNode_g7vjva_a0a0a3a2a2a1a5a1a4a1a4a1a2a1a5a1a1 = new SNodePointer("r:00000000-0000-4000-0000-011c8959034c(jetbrains.mps.lang.quotation.generator.baseLanguage.template.main@generator)", "937236280924642856");
  private static SNodePointer ifMacroRef_g7vjva_a0a0a1a3a3a2a2a1a5a1a4a1a4a1a2a1a5a1a1 = new SNodePointer("r:00000000-0000-4000-0000-011c8959034c(jetbrains.mps.lang.quotation.generator.baseLanguage.template.main@generator)", "937236280924642866");
  private static SNodePointer templateNode_g7vjva_a0a0a1a2a1a3a3a2a2a1a5a1a4a1a4a1a2a1a5a1a1 = new SNodePointer("r:00000000-0000-4000-0000-011c8959034c(jetbrains.mps.lang.quotation.generator.baseLanguage.template.main@generator)", "937236280924642857");
  private static SNodePointer propertyMacro_g7vjva_c0b0b0a2a1a2a1a3a3a2a2a1a5a1a4a1a4a1a2a1a5a1a1 = new SNodePointer("r:00000000-0000-4000-0000-011c8959034c(jetbrains.mps.lang.quotation.generator.baseLanguage.template.main@generator)", "937236280924642858");
  private static SNodePointer templateNode_g7vjva_a0a0a1a4a1a2a1a3a3a2a2a1a5a1a4a1a4a1a2a1a5a1a1 = new SNodePointer("r:00000000-0000-4000-0000-011c8959034c(jetbrains.mps.lang.quotation.generator.baseLanguage.template.main@generator)", "937236280924642871");
  private static SNodePointer templateNode_g7vjva_a0a0a1a5a1a2a1a3a3a2a2a1a5a1a4a1a4a1a2a1a5a1a1 = new SNodePointer("r:00000000-0000-4000-0000-011c8959034c(jetbrains.mps.lang.quotation.generator.baseLanguage.template.main@generator)", "937236280924642872");
  private static SNodePointer templateNode_g7vjva_a0a0a1a6a1a4a1a4a1a2a1a5a1a1 = new SNodePointer("r:00000000-0000-4000-0000-011c8959034c(jetbrains.mps.lang.quotation.generator.baseLanguage.template.main@generator)", "937236280924642956");
  private static SNodePointer switchMacroRef_g7vjva_a0a0a1a3a1a6a1a4a1a4a1a2a1a5a1a1 = new SNodePointer("r:00000000-0000-4000-0000-011c8959034c(jetbrains.mps.lang.quotation.generator.baseLanguage.template.main@generator)", "937236280924642958");
  private static SNodePointer templateSwitchNode_g7vjva_a0a1a1a0c0b0d0b0g0b0e0b0e0b0c0b0f0b0b = new SNodePointer("r:00000000-0000-4000-0000-011c8959034c(jetbrains.mps.lang.quotation.generator.baseLanguage.template.main@generator)", "1196351886667");
  private static SNodePointer templateNode_g7vjva_a0a0a1a3a1a0c0b0d0b0g0b0e0b0e0b0c0b0f0b0b = new SNodePointer("r:00000000-0000-4000-0000-011c8959034c(jetbrains.mps.lang.quotation.generator.baseLanguage.template.main@generator)", "937236280924642957");
  private static SNodePointer loopMacroRef_g7vjva_a0a0a1a7a1a4a1a4a1a2a1a5a1a1 = new SNodePointer("r:00000000-0000-4000-0000-011c8959034c(jetbrains.mps.lang.quotation.generator.baseLanguage.template.main@generator)", "937236280924643006");
  private static SNodePointer templateNode_g7vjva_a0a0a3a2a2a1a7a1a4a1a4a1a2a1a5a1a1 = new SNodePointer("r:00000000-0000-4000-0000-011c8959034c(jetbrains.mps.lang.quotation.generator.baseLanguage.template.main@generator)", "937236280924642965");
  private static SNodePointer templateNode_g7vjva_a0a0a1a3a3a2a2a1a7a1a4a1a4a1a2a1a5a1a1 = new SNodePointer("r:00000000-0000-4000-0000-011c8959034c(jetbrains.mps.lang.quotation.generator.baseLanguage.template.main@generator)", "937236280924642966");
  private static SNodePointer templateNode_g7vjva_a0a0a1a3a1a3a3a2a2a1a7a1a4a1a4a1a2a1a5a1a1 = new SNodePointer("r:00000000-0000-4000-0000-011c8959034c(jetbrains.mps.lang.quotation.generator.baseLanguage.template.main@generator)", "937236280924642967");
  private static SNodePointer referenceMacro_g7vjva_c0b0a0a0a0a0c0b0d0b0d0d0c0c0b0h0b0e0b0e0b0c0b0f0b0b = new SNodePointer("r:00000000-0000-4000-0000-011c8959034c(jetbrains.mps.lang.quotation.generator.baseLanguage.template.main@generator)", "937236280924642968");
  private static SNodePointer templateNode_g7vjva_a0a0a1a4a1a3a3a2a2a1a7a1a4a1a4a1a2a1a5a1a1 = new SNodePointer("r:00000000-0000-4000-0000-011c8959034c(jetbrains.mps.lang.quotation.generator.baseLanguage.template.main@generator)", "937236280924642981");
  private static SNodePointer templateNode_g7vjva_a0a0a1a4a1a4a1a3a3a2a2a1a7a1a4a1a4a1a2a1a5a1a1 = new SNodePointer("r:00000000-0000-4000-0000-011c8959034c(jetbrains.mps.lang.quotation.generator.baseLanguage.template.main@generator)", "937236280924642982");
  private static SNodePointer propertyMacro_g7vjva_c0b0b0a2a1a4a1a4a1a3a3a2a2a1a7a1a4a1a4a1a2a1a5a1a1 = new SNodePointer("r:00000000-0000-4000-0000-011c8959034c(jetbrains.mps.lang.quotation.generator.baseLanguage.template.main@generator)", "937236280924642983");
  private static SNodePointer templateNode_g7vjva_a0a0a1a5a1a4a1a3a3a2a2a1a7a1a4a1a4a1a2a1a5a1a1 = new SNodePointer("r:00000000-0000-4000-0000-011c8959034c(jetbrains.mps.lang.quotation.generator.baseLanguage.template.main@generator)", "937236280924642992");
  private static SNodePointer referenceMacro_g7vjva_c0b0a0a0a0a0c0b0f0b0e0b0d0d0c0c0b0h0b0e0b0e0b0c0b0f0b0b = new SNodePointer("r:00000000-0000-4000-0000-011c8959034c(jetbrains.mps.lang.quotation.generator.baseLanguage.template.main@generator)", "937236280924642993");
  private static SNodePointer templateNode_g7vjva_a0a0a1a8a1a4a1a4a1a2a1a5a1a1 = new SNodePointer("r:00000000-0000-4000-0000-011c8959034c(jetbrains.mps.lang.quotation.generator.baseLanguage.template.main@generator)", "937236280924643190");
  private static SNodePointer templateNode_g7vjva_a0a0a1a3a1a8a1a4a1a4a1a2a1a5a1a1 = new SNodePointer("r:00000000-0000-4000-0000-011c8959034c(jetbrains.mps.lang.quotation.generator.baseLanguage.template.main@generator)", "937236280924643191");
  private static SNodePointer loopMacroRef_g7vjva_a0a0a1a5a1a4a1a2a1a5a1a1 = new SNodePointer("r:00000000-0000-4000-0000-011c8959034c(jetbrains.mps.lang.quotation.generator.baseLanguage.template.main@generator)", "937236280924643194");
  private static SNodePointer templateNode_g7vjva_a0a0a3a2a2a1a5a1a4a1a2a1a5a1a1 = new SNodePointer("r:00000000-0000-4000-0000-011c8959034c(jetbrains.mps.lang.quotation.generator.baseLanguage.template.main@generator)", "937236280924643192");
  private static SNodePointer propertyMacro_g7vjva_c0b0b0a2a3a2a2a1a5a1a4a1a2a1a5a1a1 = new SNodePointer("r:00000000-0000-4000-0000-011c8959034c(jetbrains.mps.lang.quotation.generator.baseLanguage.template.main@generator)", "937236280924643240");
  private static SNodePointer templateNode_g7vjva_a0a0a1a4a3a2a2a1a5a1a4a1a2a1a5a1a1 = new SNodePointer("r:00000000-0000-4000-0000-011c8959034c(jetbrains.mps.lang.quotation.generator.baseLanguage.template.main@generator)", "937236280924643193");
  private static SNodePointer templateNode_g7vjva_a0a0a1a6a1a4a1a2a1a5a1a1 = new SNodePointer("r:00000000-0000-4000-0000-011c8959034c(jetbrains.mps.lang.quotation.generator.baseLanguage.template.main@generator)", "937236280924643286");
  private static SNodePointer templateNode_g7vjva_a0a0a1a7a1a4a1a2a1a5a1a1 = new SNodePointer("r:00000000-0000-4000-0000-011c8959034c(jetbrains.mps.lang.quotation.generator.baseLanguage.template.main@generator)", "937236280924643287");
  private static SNodePointer templateNode_g7vjva_a0a0a1a5a1a2a1a5a1a1 = new SNodePointer("r:00000000-0000-4000-0000-011c8959034c(jetbrains.mps.lang.quotation.generator.baseLanguage.template.main@generator)", "937236280924642825");
  private static SNodePointer templateNode_g7vjva_a0a0a1a6a1a2a1a5a1a1 = new SNodePointer("r:00000000-0000-4000-0000-011c8959034c(jetbrains.mps.lang.quotation.generator.baseLanguage.template.main@generator)", "937236280924642826");
  private static SNodePointer templateNode_g7vjva_a0a0a1a3a1a6a1a2a1a5a1a1 = new SNodePointer("r:00000000-0000-4000-0000-011c8959034c(jetbrains.mps.lang.quotation.generator.baseLanguage.template.main@generator)", "937236280924642827");
  private static SNodePointer templateNode_g7vjva_a0a0a1a4a1a6a1a2a1a5a1a1 = new SNodePointer("r:00000000-0000-4000-0000-011c8959034c(jetbrains.mps.lang.quotation.generator.baseLanguage.template.main@generator)", "937236280924642828");
  private static SNodePointer templateNode_g7vjva_a0a0a1a5a1a6a1a2a1a5a1a1 = new SNodePointer("r:00000000-0000-4000-0000-011c8959034c(jetbrains.mps.lang.quotation.generator.baseLanguage.template.main@generator)", "937236280924642829");
  private static SNodePointer weaveTfConst_g7vjva_a0b0d = new SNodePointer("r:00000000-0000-4000-0000-011c8959034c(jetbrains.mps.lang.quotation.generator.baseLanguage.template.main@generator)", "9181472308624882698");

  public TemplateQuotation__to__methodCall() {
  }

  public SNodePointer getTemplateNode() {
    return new SNodePointer("r:00000000-0000-4000-0000-011c8959034c(jetbrains.mps.lang.quotation.generator.baseLanguage.template.main@generator)", "1196351886669");
  }

  protected SNode applyPart0(@NotNull final TemplateExecutionEnvironment environment, @NotNull final TemplateContext context) throws GenerationException {
    final SNode tnode1 = new SNode(environment.getOutputModel(), "jetbrains.mps.baseLanguageInternal.structure.ExtractStaticInnerClassExpression", false);
    try {
      environment.getTracer().pushTemplateNode(templateNode_g7vjva_a0a0a1a1);
      environment.nodeCopied(context, tnode1, "tpl/r:00000000-0000-4000-0000-011c8959034c/9181472308624882621");
      tnode1.setProperty("makeUnique", "true");

      {
        final SNode tnode2 = new SNode(environment.getOutputModel(), "jetbrains.mps.baseLanguage.structure.DotExpression", false);
        try {
          environment.getTracer().pushTemplateNode(templateNode_g7vjva_a0a0a1a4a1a1);
          environment.nodeCopied(context, tnode2, "tpl/r:00000000-0000-4000-0000-011c8959034c/9181472308624882629");

          {
            final SNode tnode3 = new SNode(environment.getOutputModel(), "jetbrains.mps.baseLanguage.structure.GenericNewExpression", false);
            try {
              environment.getTracer().pushTemplateNode(templateNode_g7vjva_a0a0a1a3a1a4a1a1);
              environment.nodeCopied(context, tnode3, "tpl/r:00000000-0000-4000-0000-011c8959034c/9181472308624882630");

              {
                final SNode tnode4 = new SNode(environment.getOutputModel(), "jetbrains.mps.baseLanguageInternal.structure.ExtractStaticInnerClassCreator", false);
                try {
                  environment.getTracer().pushTemplateNode(templateNode_g7vjva_a0a0a1a3a1a3a1a4a1a1);
                  environment.nodeCopied(context, tnode4, "tpl/r:00000000-0000-4000-0000-011c8959034c/2877154273341383804");
                  environment.resolveInTemplateLater(tnode4, "baseMethodDeclaration", new SNodePointer("r:00000000-0000-4000-0000-011c8959034c(jetbrains.mps.lang.quotation.generator.baseLanguage.template.main@generator)", "2877154273341383804"), "tpl/r:00000000-0000-4000-0000-011c8959034c/937236280924642826", "QuotationClass_", context);

                } finally {
                  environment.getTracer().pushOutputNode(tnode4);
                  environment.getTracer().closeTemplateNode(templateNode_g7vjva_a0a0a1a3a1a3a1a4a1a1);
                }
                if (tnode4 != null) {
                  tnode3.addChild("creator", tnode4);
                }
                // TODO validate child 
              }
            } finally {
              environment.getTracer().pushOutputNode(tnode3);
              environment.getTracer().closeTemplateNode(templateNode_g7vjva_a0a0a1a3a1a4a1a1);
            }
            if (tnode3 != null) {
              tnode2.addChild("operand", tnode3);
            }
            // TODO validate child 
          }
          {
            final SNode tnode5 = new SNode(environment.getOutputModel(), "jetbrains.mps.baseLanguage.structure.InstanceMethodCallOperation", false);
            try {
              environment.getTracer().pushTemplateNode(templateNode_g7vjva_a0a0a1a4a1a4a1a1);
              environment.nodeCopied(context, tnode5, "tpl/r:00000000-0000-4000-0000-011c8959034c/9181472308624882632");
              environment.resolveInTemplateLater(tnode5, "baseMethodDeclaration", new SNodePointer("r:00000000-0000-4000-0000-011c8959034c(jetbrains.mps.lang.quotation.generator.baseLanguage.template.main@generator)", "9181472308624882632"), "tpl/r:00000000-0000-4000-0000-011c8959034c/937236280924642838", "createNode", context);

              {
                final List<SNode> tlist6 = new ArrayList();
                try {
                  environment.getTracer().pushMacro(loopMacroRef_g7vjva_a0a0a1a4a1a4a1a4a1a1);
                  final Iterable<SNode> loopList6 = QueriesGenerated.sourceNodesQuery_9181472308624882635(environment.getOperationContext(), new SourceSubstituteMacroNodesContext(context.getInput(), null, loopMacroRef_g7vjva_a0a0a1a4a1a4a1a4a1a1, context, environment.getGenerator()));
                  for (SNode itnode6 : loopList6) {
                    if (itnode6 == null) {
                      continue;
                    }
                    boolean inputChanged6 = context.getInput() != itnode6;
                    try {
                      if (inputChanged6) {
                        environment.getTracer().pushInputNode(itnode6);
                      }
                      TemplateContext context6 = context.subContext(null, itnode6);
                      Collection<SNode> tlist7 = null;
                      try {
                        environment.getTracer().pushMacro(copySrcMacro_g7vjva_a0a0a3a2a2a1a4a1a4a1a4a1a1);
                        final SNode copySrcInput7 = QueriesGenerated.sourceNodeQuery_9181472308624882685(environment.getOperationContext(), new SourceSubstituteMacroNodeContext(context6.getInput(), copySrcMacro_g7vjva_a0a0a3a2a2a1a4a1a4a1a4a1a1, context6, environment.getGenerator()));
                        tlist7 = environment.copyNodes(TemplateUtil.singletonList(copySrcInput7), copySrcMacro_g7vjva_a0a0a3a2a2a1a4a1a4a1a4a1a1, "tpl/r:00000000-0000-4000-0000-011c8959034c/9181472308624882633", null, context6);
                      } finally {
                        environment.getTracer().closeMacro(copySrcMacro_g7vjva_a0a0a3a2a2a1a4a1a4a1a4a1a1);
                      }
                      if (tlist7 != null) {
                        tlist6.addAll(tlist7);
                      }
                    } finally {
                      if (inputChanged6) {
                        environment.getTracer().closeInputNode(itnode6);
                      }
                    }
                  }
                } finally {
                  environment.getTracer().closeMacro(loopMacroRef_g7vjva_a0a0a1a4a1a4a1a4a1a1);
                }
                for (SNode child8 : TemplateUtil.asNotNull(tlist6)) {
                  tnode5.addChild("actualArgument", child8);
                }
                // TODO validate child 
              }
            } finally {
              environment.getTracer().pushOutputNode(tnode5);
              environment.getTracer().closeTemplateNode(templateNode_g7vjva_a0a0a1a4a1a4a1a1);
            }
            if (tnode5 != null) {
              tnode2.addChild("operation", tnode5);
            }
            // TODO validate child 
          }
        } finally {
          environment.getTracer().pushOutputNode(tnode2);
          environment.getTracer().closeTemplateNode(templateNode_g7vjva_a0a0a1a4a1a1);
        }
        if (tnode2 != null) {
          tnode1.addChild("inner", tnode2);
        }
        // TODO validate child 
      }
      {
        Collection<SNode> tlist9 = null;
        try {
          environment.getTracer().pushMacro(ifMacroRef_g7vjva_a0a0a1a5a1a1);
          TemplateContext context9 = context.subContext("quotationClass");
          if (QueriesGenerated.ifMacro_Condition_1419698836134220561(environment.getOperationContext(), new IfMacroContext(context.getInput(), ifMacroRef_g7vjva_a0a0a1a5a1a1, context, environment.getGenerator()))) {
            final SNode tnode10 = new SNode(environment.getOutputModel(), "jetbrains.mps.baseLanguageInternal.structure.ExtractStaticInnerClassConcept", false);
            try {
              environment.getTracer().pushTemplateNode(templateNode_g7vjva_a0a0a1a2a1a5a1a1);
              environment.nodeCopied(context9, tnode10, "tpl/r:00000000-0000-4000-0000-011c8959034c/937236280924642824");
              tnode10.setProperty("name", "QuotationClass_");

              {
                final SNode tnode11 = new SNode(environment.getOutputModel(), "jetbrains.mps.baseLanguage.structure.InstanceMethodDeclaration", false);
                try {
                  environment.getTracer().pushTemplateNode(templateNode_g7vjva_a0a0a1a4a1a2a1a5a1a1);
                  environment.nodeCopied(context9, tnode11, "tpl/r:00000000-0000-4000-0000-011c8959034c/937236280924642838");
                  tnode11.setProperty("name", "createNode");

                  {
                    final SNode tnode12 = new SNode(environment.getOutputModel(), "jetbrains.mps.baseLanguage.structure.StatementList", false);
                    try {
                      environment.getTracer().pushTemplateNode(templateNode_g7vjva_a0a0a1a4a1a4a1a2a1a5a1a1);
                      environment.nodeCopied(context9, tnode12, "tpl/r:00000000-0000-4000-0000-011c8959034c/937236280924642839");

                      {
                        final SNode tnode13 = new SNode(environment.getOutputModel(), "jetbrains.mps.baseLanguage.structure.LocalVariableDeclarationStatement", false);
                        try {
                          environment.getTracer().pushTemplateNode(templateNode_g7vjva_a0a0a1a3a1a4a1a4a1a2a1a5a1a1);
                          environment.nodeCopied(context9, tnode13, "tpl/r:00000000-0000-4000-0000-011c8959034c/937236280924642840");

                          {
                            final SNode tnode14 = new SNode(environment.getOutputModel(), "jetbrains.mps.baseLanguage.structure.LocalVariableDeclaration", false);
                            try {
                              environment.getTracer().pushTemplateNode(templateNode_g7vjva_a0a0a1a3a1a3a1a4a1a4a1a2a1a5a1a1);
                              environment.nodeCopied(context9, tnode14, "tpl/r:00000000-0000-4000-0000-011c8959034c/937236280924642841");
                              tnode14.setProperty("name", "result");

                              {
                                final SNode tnode15 = new SNode(environment.getOutputModel(), "jetbrains.mps.baseLanguage.structure.NullLiteral", false);
                                try {
                                  environment.getTracer().pushTemplateNode(templateNode_g7vjva_a0a0a1a4a1a3a1a3a1a4a1a4a1a2a1a5a1a1);
                                  environment.nodeCopied(context9, tnode15, "tpl/r:00000000-0000-4000-0000-011c8959034c/937236280924642842");

                                } finally {
                                  environment.getTracer().pushOutputNode(tnode15);
                                  environment.getTracer().closeTemplateNode(templateNode_g7vjva_a0a0a1a4a1a3a1a3a1a4a1a4a1a2a1a5a1a1);
                                }
                                if (tnode15 != null) {
                                  tnode14.addChild("initializer", tnode15);
                                }
                                // TODO validate child 
                              }
                              {
                                final SNode tnode16 = new SNode(environment.getOutputModel(), "jetbrains.mps.lang.smodel.structure.SNodeType", false);
                                try {
                                  environment.getTracer().pushTemplateNode(templateNode_g7vjva_a0a0a1a5a1a3a1a3a1a4a1a4a1a2a1a5a1a1);
                                  environment.nodeCopied(context9, tnode16, "tpl/r:00000000-0000-4000-0000-011c8959034c/937236280924642843");

                                } finally {
                                  environment.getTracer().pushOutputNode(tnode16);
                                  environment.getTracer().closeTemplateNode(templateNode_g7vjva_a0a0a1a5a1a3a1a3a1a4a1a4a1a2a1a5a1a1);
                                }
                                if (tnode16 != null) {
                                  tnode14.addChild("type", tnode16);
                                }
                                // TODO validate child 
                              }
                            } finally {
                              environment.getTracer().pushOutputNode(tnode14);
                              environment.getTracer().closeTemplateNode(templateNode_g7vjva_a0a0a1a3a1a3a1a4a1a4a1a2a1a5a1a1);
                            }
                            if (tnode14 != null) {
                              tnode13.addChild("localVariableDeclaration", tnode14);
                            }
                            // TODO validate child 
                          }
                        } finally {
                          environment.getTracer().pushOutputNode(tnode13);
                          environment.getTracer().closeTemplateNode(templateNode_g7vjva_a0a0a1a3a1a4a1a4a1a2a1a5a1a1);
                        }
                        if (tnode13 != null) {
                          tnode12.addChild("statement", tnode13);
                        }
                        // TODO validate child 
                      }
                      {
                        final SNode tnode17 = new SNode(environment.getOutputModel(), "jetbrains.mps.baseLanguage.structure.LocalVariableDeclarationStatement", false);
                        try {
                          environment.getTracer().pushTemplateNode(templateNode_g7vjva_a0a0a1a4a1a4a1a4a1a2a1a5a1a1);
                          environment.nodeCopied(context9, tnode17, "tpl/r:00000000-0000-4000-0000-011c8959034c/937236280924642844");

                          {
                            Collection<SNode> tlist18 = null;
                            try {
                              environment.getTracer().pushMacro(ifMacroRef_g7vjva_a0a0a1a3a1a4a1a4a1a4a1a2a1a5a1a1);
                              TemplateContext context18 = context9.subContext("map");
                              if (QueriesGenerated.ifMacro_Condition_937236280924642852(environment.getOperationContext(), new IfMacroContext(context9.getInput(), ifMacroRef_g7vjva_a0a0a1a3a1a4a1a4a1a4a1a2a1a5a1a1, context9, environment.getGenerator()))) {
                                final SNode tnode19 = new SNode(environment.getOutputModel(), "jetbrains.mps.baseLanguage.structure.LocalVariableDeclaration", false);
                                try {
                                  environment.getTracer().pushTemplateNode(templateNode_g7vjva_a0a0a1a2a1a3a1a4a1a4a1a4a1a2a1a5a1a1);
                                  environment.nodeCopied(context18, tnode19, "tpl/r:00000000-0000-4000-0000-011c8959034c/937236280924642845");
                                  tnode19.setProperty("name", "_parameterValues_129834374");

                                  {
                                    final SNode tnode20 = new SNode(environment.getOutputModel(), "jetbrains.mps.baseLanguage.structure.ClassifierType", false);
                                    try {
                                      environment.getTracer().pushTemplateNode(templateNode_g7vjva_a0a0a1a4a1a2a1a3a1a4a1a4a1a4a1a2a1a5a1a1);
                                      environment.nodeCopied(context18, tnode20, "tpl/r:00000000-0000-4000-0000-011c8959034c/937236280924642846");
                                      tnode20.addReference(SReference.create("classifier", tnode20, SModelReference.fromString("f:java_stub#6354ebe7-c22a-4a0f-ac54-50b52ab9b065#java.util(JDK/java.util@java_stub)"), SNodeId.fromString("~Set")));

                                      {
                                        final SNode tnode21 = new SNode(environment.getOutputModel(), "jetbrains.mps.lang.smodel.structure.SNodeType", false);
                                        try {
                                          environment.getTracer().pushTemplateNode(templateNode_g7vjva_a0a0a1a4a1a4a1a2a1a3a1a4a1a4a1a4a1a2a1a5a1a1);
                                          environment.nodeCopied(context18, tnode21, "tpl/r:00000000-0000-4000-0000-011c8959034c/937236280924642847");

                                        } finally {
                                          environment.getTracer().pushOutputNode(tnode21);
                                          environment.getTracer().closeTemplateNode(templateNode_g7vjva_a0a0a1a4a1a4a1a2a1a3a1a4a1a4a1a4a1a2a1a5a1a1);
                                        }
                                        if (tnode21 != null) {
                                          tnode20.addChild("parameter", tnode21);
                                        }
                                        // TODO validate child 
                                      }
                                    } finally {
                                      environment.getTracer().pushOutputNode(tnode20);
                                      environment.getTracer().closeTemplateNode(templateNode_g7vjva_a0a0a1a4a1a2a1a3a1a4a1a4a1a4a1a2a1a5a1a1);
                                    }
                                    if (tnode20 != null) {
                                      tnode19.addChild("type", tnode20);
                                    }
                                    // TODO validate child 
                                  }
                                  {
                                    final SNode tnode22 = new SNode(environment.getOutputModel(), "jetbrains.mps.baseLanguage.structure.GenericNewExpression", false);
                                    try {
                                      environment.getTracer().pushTemplateNode(templateNode_g7vjva_a0a0a1a5a1a2a1a3a1a4a1a4a1a4a1a2a1a5a1a1);
                                      environment.nodeCopied(context18, tnode22, "tpl/r:00000000-0000-4000-0000-011c8959034c/937236280924642848");

                                      {
                                        final SNode tnode23 = new SNode(environment.getOutputModel(), "jetbrains.mps.baseLanguage.structure.ClassCreator", false);
                                        try {
                                          environment.getTracer().pushTemplateNode(templateNode_g7vjva_a0a0a1a3a1a5a1a2a1a3a1a4a1a4a1a4a1a2a1a5a1a1);
                                          environment.nodeCopied(context18, tnode23, "tpl/r:00000000-0000-4000-0000-011c8959034c/937236280924642849");
                                          tnode23.addReference(SReference.create("baseMethodDeclaration", tnode23, SModelReference.fromString("f:java_stub#6354ebe7-c22a-4a0f-ac54-50b52ab9b065#java.util(JDK/java.util@java_stub)"), SNodeId.fromString("~HashSet.<init>()")));

                                          {
                                            final SNode tnode24 = new SNode(environment.getOutputModel(), "jetbrains.mps.lang.smodel.structure.SNodeType", false);
                                            try {
                                              environment.getTracer().pushTemplateNode(templateNode_g7vjva_a0a0a1a4a1a3a1a5a1a2a1a3a1a4a1a4a1a4a1a2a1a5a1a1);
                                              environment.nodeCopied(context18, tnode24, "tpl/r:00000000-0000-4000-0000-011c8959034c/937236280924642850");

                                            } finally {
                                              environment.getTracer().pushOutputNode(tnode24);
                                              environment.getTracer().closeTemplateNode(templateNode_g7vjva_a0a0a1a4a1a3a1a5a1a2a1a3a1a4a1a4a1a4a1a2a1a5a1a1);
                                            }
                                            if (tnode24 != null) {
                                              tnode23.addChild("typeParameter", tnode24);
                                            }
                                            // TODO validate child 
                                          }
                                        } finally {
                                          environment.getTracer().pushOutputNode(tnode23);
                                          environment.getTracer().closeTemplateNode(templateNode_g7vjva_a0a0a1a3a1a5a1a2a1a3a1a4a1a4a1a4a1a2a1a5a1a1);
                                        }
                                        if (tnode23 != null) {
                                          tnode22.addChild("creator", tnode23);
                                        }
                                        // TODO validate child 
                                      }
                                    } finally {
                                      environment.getTracer().pushOutputNode(tnode22);
                                      environment.getTracer().closeTemplateNode(templateNode_g7vjva_a0a0a1a5a1a2a1a3a1a4a1a4a1a4a1a2a1a5a1a1);
                                    }
                                    if (tnode22 != null) {
                                      tnode19.addChild("initializer", tnode22);
                                    }
                                    // TODO validate child 
                                  }
                                } finally {
                                  environment.getTracer().pushOutputNode(tnode19);
                                  environment.getTracer().closeTemplateNode(templateNode_g7vjva_a0a0a1a2a1a3a1a4a1a4a1a4a1a2a1a5a1a1);
                                }
                                tlist18 = TemplateUtil.singletonList(tnode19);
                                environment.registerLabel(context9.getInput(), tnode19, "map");
                              }

                            } finally {
                              environment.getTracer().closeMacro(ifMacroRef_g7vjva_a0a0a1a3a1a4a1a4a1a4a1a2a1a5a1a1);
                            }
                            for (SNode child25 : TemplateUtil.asNotNull(tlist18)) {
                              tnode17.addChild("localVariableDeclaration", child25);
                            }
                            // TODO validate child 
                          }
                        } finally {
                          environment.getTracer().pushOutputNode(tnode17);
                          environment.getTracer().closeTemplateNode(templateNode_g7vjva_a0a0a1a4a1a4a1a4a1a2a1a5a1a1);
                        }
                        if (tnode17 != null) {
                          tnode12.addChild("statement", tnode17);
                        }
                        // TODO validate child 
                      }
                      {
                        final List<SNode> tlist26 = new ArrayList();
                        try {
                          environment.getTracer().pushMacro(loopMacroRef_g7vjva_a0a0a1a5a1a4a1a4a1a2a1a5a1a1);
                          final Iterable<SNode> loopList26 = QueriesGenerated.sourceNodesQuery_937236280924642874(environment.getOperationContext(), new SourceSubstituteMacroNodesContext(context9.getInput(), null, loopMacroRef_g7vjva_a0a0a1a5a1a4a1a4a1a2a1a5a1a1, context9, environment.getGenerator()));
                          for (SNode itnode26 : loopList26) {
                            if (itnode26 == null) {
                              continue;
                            }
                            boolean inputChanged26 = context9.getInput() != itnode26;
                            try {
                              if (inputChanged26) {
                                environment.getTracer().pushInputNode(itnode26);
                              }
                              TemplateContext context26 = context9.subContext(null, itnode26);
                              final SNode tnode27 = new SNode(environment.getOutputModel(), "jetbrains.mps.baseLanguage.structure.LocalVariableDeclarationStatement", false);
                              try {
                                environment.getTracer().pushTemplateNode(templateNode_g7vjva_a0a0a3a2a2a1a5a1a4a1a4a1a2a1a5a1a1);
                                environment.nodeCopied(context26, tnode27, "tpl/r:00000000-0000-4000-0000-011c8959034c/937236280924642856");

                                {
                                  Collection<SNode> tlist28 = null;
                                  try {
                                    environment.getTracer().pushMacro(ifMacroRef_g7vjva_a0a0a1a3a3a2a2a1a5a1a4a1a4a1a2a1a5a1a1);
                                    TemplateContext context28 = context26.subContext("nodeVariable");
                                    if (QueriesGenerated.ifMacro_Condition_937236280924642867(environment.getOperationContext(), new IfMacroContext(context26.getInput(), ifMacroRef_g7vjva_a0a0a1a3a3a2a2a1a5a1a4a1a4a1a2a1a5a1a1, context26, environment.getGenerator()))) {
                                      final SNode tnode29 = new SNode(environment.getOutputModel(), "jetbrains.mps.baseLanguage.structure.LocalVariableDeclaration", false);
                                      try {
                                        environment.getTracer().pushTemplateNode(templateNode_g7vjva_a0a0a1a2a1a3a3a2a2a1a5a1a4a1a4a1a2a1a5a1a1);
                                        environment.nodeCopied(context28, tnode29, "tpl/r:00000000-0000-4000-0000-011c8959034c/937236280924642857");
                                        tnode29.setProperty("name", TemplateUtil.asString(QueriesGenerated.propertyMacro_GetPropertyValue_937236280924642859(environment.getOperationContext(), new PropertyMacroContext(context28.getInput(), "_node_", propertyMacro_g7vjva_c0b0b0a2a1a2a1a3a3a2a2a1a5a1a4a1a4a1a2a1a5a1a1, context28, environment.getGenerator()))));

                                        {
                                          final SNode tnode30 = new SNode(environment.getOutputModel(), "jetbrains.mps.baseLanguage.structure.NullLiteral", false);
                                          try {
                                            environment.getTracer().pushTemplateNode(templateNode_g7vjva_a0a0a1a4a1a2a1a3a3a2a2a1a5a1a4a1a4a1a2a1a5a1a1);
                                            environment.nodeCopied(context28, tnode30, "tpl/r:00000000-0000-4000-0000-011c8959034c/937236280924642871");

                                          } finally {
                                            environment.getTracer().pushOutputNode(tnode30);
                                            environment.getTracer().closeTemplateNode(templateNode_g7vjva_a0a0a1a4a1a2a1a3a3a2a2a1a5a1a4a1a4a1a2a1a5a1a1);
                                          }
                                          if (tnode30 != null) {
                                            tnode29.addChild("initializer", tnode30);
                                          }
                                          // TODO validate child 
                                        }
                                        {
                                          final SNode tnode31 = new SNode(environment.getOutputModel(), "jetbrains.mps.lang.smodel.structure.SNodeType", false);
                                          try {
                                            environment.getTracer().pushTemplateNode(templateNode_g7vjva_a0a0a1a5a1a2a1a3a3a2a2a1a5a1a4a1a4a1a2a1a5a1a1);
                                            environment.nodeCopied(context28, tnode31, "tpl/r:00000000-0000-4000-0000-011c8959034c/937236280924642872");

                                          } finally {
                                            environment.getTracer().pushOutputNode(tnode31);
                                            environment.getTracer().closeTemplateNode(templateNode_g7vjva_a0a0a1a5a1a2a1a3a3a2a2a1a5a1a4a1a4a1a2a1a5a1a1);
                                          }
                                          if (tnode31 != null) {
                                            tnode29.addChild("type", tnode31);
                                          }
                                          // TODO validate child 
                                        }
                                      } finally {
                                        environment.getTracer().pushOutputNode(tnode29);
                                        environment.getTracer().closeTemplateNode(templateNode_g7vjva_a0a0a1a2a1a3a3a2a2a1a5a1a4a1a4a1a2a1a5a1a1);
                                      }
                                      tlist28 = TemplateUtil.singletonList(tnode29);
                                      environment.registerLabel(context26.getInput(), tnode29, "nodeVariable");
                                    }

                                  } finally {
                                    environment.getTracer().closeMacro(ifMacroRef_g7vjva_a0a0a1a3a3a2a2a1a5a1a4a1a4a1a2a1a5a1a1);
                                  }
                                  for (SNode child32 : TemplateUtil.asNotNull(tlist28)) {
                                    tnode27.addChild("localVariableDeclaration", child32);
                                  }
                                  // TODO validate child 
                                }
                              } finally {
                                environment.getTracer().pushOutputNode(tnode27);
                                environment.getTracer().closeTemplateNode(templateNode_g7vjva_a0a0a3a2a2a1a5a1a4a1a4a1a2a1a5a1a1);
                              }
                              if (tnode27 != null) {
                                tlist26.add(tnode27);
                              }
                            } finally {
                              if (inputChanged26) {
                                environment.getTracer().closeInputNode(itnode26);
                              }
                            }
                          }
                        } finally {
                          environment.getTracer().closeMacro(loopMacroRef_g7vjva_a0a0a1a5a1a4a1a4a1a2a1a5a1a1);
                        }
                        for (SNode child33 : TemplateUtil.asNotNull(tlist26)) {
                          tnode12.addChild("statement", child33);
                        }
                        // TODO validate child 
                      }
                      {
                        final SNode tnode34 = new SNode(environment.getOutputModel(), "jetbrains.mps.baseLanguage.structure.BlockStatement", false);
                        try {
                          environment.getTracer().pushTemplateNode(templateNode_g7vjva_a0a0a1a6a1a4a1a4a1a2a1a5a1a1);
                          environment.nodeCopied(context9, tnode34, "tpl/r:00000000-0000-4000-0000-011c8959034c/937236280924642956");

                          {
                            Collection<SNode> tlist35 = null;
                            try {
                              environment.getTracer().pushMacro(switchMacroRef_g7vjva_a0a0a1a3a1a6a1a4a1a4a1a2a1a5a1a1);
                              final SNode switchInput35 = QueriesGenerated.sourceNodeQuery_937236280924642959(environment.getOperationContext(), new SourceSubstituteMacroNodeContext(context9.getInput(), switchMacroRef_g7vjva_a0a0a1a3a1a6a1a4a1a4a1a2a1a5a1a1, context9, environment.getGenerator()));
                              if (switchInput35 == null) {
                                tlist35 = Collections.emptyList();
                              } else {
                                boolean inputChanged35 = context9.getInput() != switchInput35;
                                try {
                                  if (inputChanged35) {
                                    environment.getTracer().pushInputNode(switchInput35);
                                  }
                                  environment.getTracer().pushSwitch(templateSwitchNode_g7vjva_a0a1a1a0c0b0d0b0g0b0e0b0e0b0c0b0f0b0b);
                                  tlist35 = environment.trySwitch(templateSwitchNode_g7vjva_a0a1a1a0c0b0d0b0g0b0e0b0e0b0c0b0f0b0b, "nodeCreatorForQuotedNode", context9.subContext("nodeCreatorForQuotedNode", switchInput35));
                                  if (tlist35 == null) {
                                    final SNode tnode36 = new SNode(environment.getOutputModel(), "jetbrains.mps.baseLanguage.structure.StatementList", false);
                                    try {
                                      environment.getTracer().pushTemplateNode(templateNode_g7vjva_a0a0a1a3a1a0c0b0d0b0g0b0e0b0e0b0c0b0f0b0b);
                                      environment.nodeCopied(context9, tnode36, "tpl/r:00000000-0000-4000-0000-011c8959034c/937236280924642957");

                                    } finally {
                                      environment.getTracer().pushOutputNode(tnode36);
                                      environment.getTracer().closeTemplateNode(templateNode_g7vjva_a0a0a1a3a1a0c0b0d0b0g0b0e0b0e0b0c0b0f0b0b);
                                    }
                                    if (tnode36 != null) {
                                      tlist35 = TemplateUtil.singletonList(tnode36);
                                    }
                                  }
                                } finally {
                                  // TODO close switch node 
                                  if (inputChanged35) {
                                    environment.getTracer().closeInputNode(switchInput35);
                                  }
                                }
                              }
                              environment.registerLabel(switchInput35, tlist35, "nodeCreatorForQuotedNode");
                            } finally {
                              environment.getTracer().closeMacro(switchMacroRef_g7vjva_a0a0a1a3a1a6a1a4a1a4a1a2a1a5a1a1);
                            }
                            for (SNode child37 : TemplateUtil.asNotNull(tlist35)) {
                              tnode34.addChild("statements", child37);
                            }
                            // TODO validate child 
                          }
                        } finally {
                          environment.getTracer().pushOutputNode(tnode34);
                          environment.getTracer().closeTemplateNode(templateNode_g7vjva_a0a0a1a6a1a4a1a4a1a2a1a5a1a1);
                        }
                        if (tnode34 != null) {
                          tnode12.addChild("statement", tnode34);
                        }
                        // TODO validate child 
                      }
                      {
                        final List<SNode> tlist38 = new ArrayList();
                        try {
                          environment.getTracer().pushMacro(loopMacroRef_g7vjva_a0a0a1a7a1a4a1a4a1a2a1a5a1a1);
                          final Iterable<SNode> loopList38 = QueriesGenerated.sourceNodesQuery_937236280924643007(environment.getOperationContext(), new SourceSubstituteMacroNodesContext(context9.getInput(), null, loopMacroRef_g7vjva_a0a0a1a7a1a4a1a4a1a2a1a5a1a1, context9, environment.getGenerator()));
                          for (SNode itnode38 : loopList38) {
                            if (itnode38 == null) {
                              continue;
                            }
                            boolean inputChanged38 = context9.getInput() != itnode38;
                            try {
                              if (inputChanged38) {
                                environment.getTracer().pushInputNode(itnode38);
                              }
                              TemplateContext context38 = context9.subContext(null, itnode38);
                              final SNode tnode39 = new SNode(environment.getOutputModel(), "jetbrains.mps.baseLanguage.structure.ExpressionStatement", false);
                              try {
                                environment.getTracer().pushTemplateNode(templateNode_g7vjva_a0a0a3a2a2a1a7a1a4a1a4a1a2a1a5a1a1);
                                environment.nodeCopied(context38, tnode39, "tpl/r:00000000-0000-4000-0000-011c8959034c/937236280924642965");

                                {
                                  final SNode tnode40 = new SNode(environment.getOutputModel(), "jetbrains.mps.baseLanguage.structure.DotExpression", false);
                                  try {
                                    environment.getTracer().pushTemplateNode(templateNode_g7vjva_a0a0a1a3a3a2a2a1a7a1a4a1a4a1a2a1a5a1a1);
                                    environment.nodeCopied(context38, tnode40, "tpl/r:00000000-0000-4000-0000-011c8959034c/937236280924642966");

                                    {
                                      final SNode tnode41 = new SNode(environment.getOutputModel(), "jetbrains.mps.baseLanguage.structure.LocalVariableReference", false);
                                      try {
                                        environment.getTracer().pushTemplateNode(templateNode_g7vjva_a0a0a1a3a1a3a3a2a2a1a7a1a4a1a4a1a2a1a5a1a1);
                                        environment.nodeCopied(context38, tnode41, "tpl/r:00000000-0000-4000-0000-011c8959034c/937236280924642967");
                                        environment.resolve(new ReferenceResolver() {
                                          public Object resolve(SNode outputNode, TemplateContext context) {
                                            return QueriesGenerated.referenceMacro_GetReferent_937236280924642969(environment.getOperationContext(), new ReferenceMacroContext(context.getInput(), tnode41, referenceMacro_g7vjva_c0b0a0a0a0a0c0b0d0b0d0d0c0c0b0h0b0e0b0e0b0c0b0f0b0b, "variableDeclaration", context, environment.getGenerator()));
                                          }

                                          public String getDefaultResolveInfo() {
                                            return "_node_";
                                          }

                                          public SNodePointer getTemplateNode() {
                                            return new SNodePointer("r:00000000-0000-4000-0000-011c8959034c(jetbrains.mps.lang.quotation.generator.baseLanguage.template.main@generator)", "937236280924642968");
                                          }
                                        }, tnode41, "variableDeclaration", context38);

                                      } finally {
                                        environment.getTracer().pushOutputNode(tnode41);
                                        environment.getTracer().closeTemplateNode(templateNode_g7vjva_a0a0a1a3a1a3a3a2a2a1a7a1a4a1a4a1a2a1a5a1a1);
                                      }
                                      if (tnode41 != null) {
                                        tnode40.addChild("operand", tnode41);
                                      }
                                      // TODO validate child 
                                    }
                                    {
                                      final SNode tnode42 = new SNode(environment.getOutputModel(), "jetbrains.mps.baseLanguage.structure.InstanceMethodCallOperation", false);
                                      try {
                                        environment.getTracer().pushTemplateNode(templateNode_g7vjva_a0a0a1a4a1a3a3a2a2a1a7a1a4a1a4a1a2a1a5a1a1);
                                        environment.nodeCopied(context38, tnode42, "tpl/r:00000000-0000-4000-0000-011c8959034c/937236280924642981");
                                        tnode42.addReference(SReference.create("baseMethodDeclaration", tnode42, SModelReference.fromString("f:java_stub#37a3367b-1fb2-44d8-aa6b-18075e74e003#jetbrains.mps.smodel(MPS.Classpath/jetbrains.mps.smodel@java_stub)"), SNodeId.fromString("~SNode.setReferent(java.lang.String,jetbrains.mps.smodel.SNode):jetbrains.mps.smodel.SReference")));

                                        {
                                          final SNode tnode43 = new SNode(environment.getOutputModel(), "jetbrains.mps.baseLanguage.structure.StringLiteral", false);
                                          try {
                                            environment.getTracer().pushTemplateNode(templateNode_g7vjva_a0a0a1a4a1a4a1a3a3a2a2a1a7a1a4a1a4a1a2a1a5a1a1);
                                            environment.nodeCopied(context38, tnode43, "tpl/r:00000000-0000-4000-0000-011c8959034c/937236280924642982");
                                            tnode43.setProperty("value", TemplateUtil.asString(QueriesGenerated.propertyMacro_GetPropertyValue_937236280924642984(environment.getOperationContext(), new PropertyMacroContext(context38.getInput(), "role", propertyMacro_g7vjva_c0b0b0a2a1a4a1a4a1a3a3a2a2a1a7a1a4a1a4a1a2a1a5a1a1, context38, environment.getGenerator()))));

                                          } finally {
                                            environment.getTracer().pushOutputNode(tnode43);
                                            environment.getTracer().closeTemplateNode(templateNode_g7vjva_a0a0a1a4a1a4a1a3a3a2a2a1a7a1a4a1a4a1a2a1a5a1a1);
                                          }
                                          if (tnode43 != null) {
                                            tnode42.addChild("actualArgument", tnode43);
                                          }
                                          // TODO validate child 
                                        }
                                        {
                                          final SNode tnode44 = new SNode(environment.getOutputModel(), "jetbrains.mps.baseLanguage.structure.LocalVariableReference", false);
                                          try {
                                            environment.getTracer().pushTemplateNode(templateNode_g7vjva_a0a0a1a5a1a4a1a3a3a2a2a1a7a1a4a1a4a1a2a1a5a1a1);
                                            environment.nodeCopied(context38, tnode44, "tpl/r:00000000-0000-4000-0000-011c8959034c/937236280924642992");
                                            environment.resolve(new ReferenceResolver() {
                                              public Object resolve(SNode outputNode, TemplateContext context) {
                                                return QueriesGenerated.referenceMacro_GetReferent_937236280924642994(environment.getOperationContext(), new ReferenceMacroContext(context.getInput(), tnode44, referenceMacro_g7vjva_c0b0a0a0a0a0c0b0f0b0e0b0d0d0c0c0b0h0b0e0b0e0b0c0b0f0b0b, "variableDeclaration", context, environment.getGenerator()));
                                              }

                                              public String getDefaultResolveInfo() {
                                                return "_node_";
                                              }

                                              public SNodePointer getTemplateNode() {
                                                return new SNodePointer("r:00000000-0000-4000-0000-011c8959034c(jetbrains.mps.lang.quotation.generator.baseLanguage.template.main@generator)", "937236280924642993");
                                              }
                                            }, tnode44, "variableDeclaration", context38);

                                          } finally {
                                            environment.getTracer().pushOutputNode(tnode44);
                                            environment.getTracer().closeTemplateNode(templateNode_g7vjva_a0a0a1a5a1a4a1a3a3a2a2a1a7a1a4a1a4a1a2a1a5a1a1);
                                          }
                                          if (tnode44 != null) {
                                            tnode42.addChild("actualArgument", tnode44);
                                          }
                                          // TODO validate child 
                                        }
                                      } finally {
                                        environment.getTracer().pushOutputNode(tnode42);
                                        environment.getTracer().closeTemplateNode(templateNode_g7vjva_a0a0a1a4a1a3a3a2a2a1a7a1a4a1a4a1a2a1a5a1a1);
                                      }
                                      if (tnode42 != null) {
                                        tnode40.addChild("operation", tnode42);
                                      }
                                      // TODO validate child 
                                    }
                                  } finally {
                                    environment.getTracer().pushOutputNode(tnode40);
                                    environment.getTracer().closeTemplateNode(templateNode_g7vjva_a0a0a1a3a3a2a2a1a7a1a4a1a4a1a2a1a5a1a1);
                                  }
                                  if (tnode40 != null) {
                                    tnode39.addChild("expression", tnode40);
                                  }
                                  // TODO validate child 
                                }
                              } finally {
                                environment.getTracer().pushOutputNode(tnode39);
                                environment.getTracer().closeTemplateNode(templateNode_g7vjva_a0a0a3a2a2a1a7a1a4a1a4a1a2a1a5a1a1);
                              }
                              if (tnode39 != null) {
                                tlist38.add(tnode39);
                              }
                            } finally {
                              if (inputChanged38) {
                                environment.getTracer().closeInputNode(itnode38);
                              }
                            }
                          }
                        } finally {
                          environment.getTracer().closeMacro(loopMacroRef_g7vjva_a0a0a1a7a1a4a1a4a1a2a1a5a1a1);
                        }
                        for (SNode child45 : TemplateUtil.asNotNull(tlist38)) {
                          tnode12.addChild("statement", child45);
                        }
                        // TODO validate child 
                      }
                      {
                        final SNode tnode46 = new SNode(environment.getOutputModel(), "jetbrains.mps.baseLanguage.structure.ReturnStatement", false);
                        try {
                          environment.getTracer().pushTemplateNode(templateNode_g7vjva_a0a0a1a8a1a4a1a4a1a2a1a5a1a1);
                          environment.nodeCopied(context9, tnode46, "tpl/r:00000000-0000-4000-0000-011c8959034c/937236280924643190");

                          {
                            final SNode tnode47 = new SNode(environment.getOutputModel(), "jetbrains.mps.baseLanguage.structure.LocalVariableReference", false);
                            try {
                              environment.getTracer().pushTemplateNode(templateNode_g7vjva_a0a0a1a3a1a8a1a4a1a4a1a2a1a5a1a1);
                              environment.nodeCopied(context9, tnode47, "tpl/r:00000000-0000-4000-0000-011c8959034c/937236280924643191");
                              environment.resolveInTemplateLater(tnode47, "variableDeclaration", new SNodePointer("r:00000000-0000-4000-0000-011c8959034c(jetbrains.mps.lang.quotation.generator.baseLanguage.template.main@generator)", "937236280924643191"), "tpl/r:00000000-0000-4000-0000-011c8959034c/937236280924642841", "result", context9);

                            } finally {
                              environment.getTracer().pushOutputNode(tnode47);
                              environment.getTracer().closeTemplateNode(templateNode_g7vjva_a0a0a1a3a1a8a1a4a1a4a1a2a1a5a1a1);
                            }
                            if (tnode47 != null) {
                              tnode46.addChild("expression", tnode47);
                            }
                            // TODO validate child 
                          }
                        } finally {
                          environment.getTracer().pushOutputNode(tnode46);
                          environment.getTracer().closeTemplateNode(templateNode_g7vjva_a0a0a1a8a1a4a1a4a1a2a1a5a1a1);
                        }
                        if (tnode46 != null) {
                          tnode12.addChild("statement", tnode46);
                        }
                        // TODO validate child 
                      }
                    } finally {
                      environment.getTracer().pushOutputNode(tnode12);
                      environment.getTracer().closeTemplateNode(templateNode_g7vjva_a0a0a1a4a1a4a1a2a1a5a1a1);
                    }
                    if (tnode12 != null) {
                      tnode11.addChild("body", tnode12);
                    }
                    // TODO validate child 
                  }
                  {
                    final List<SNode> tlist48 = new ArrayList();
                    try {
                      environment.getTracer().pushMacro(loopMacroRef_g7vjva_a0a0a1a5a1a4a1a2a1a5a1a1);
                      final Iterable<SNode> loopList48 = QueriesGenerated.sourceNodesQuery_937236280924643195(environment.getOperationContext(), new SourceSubstituteMacroNodesContext(context9.getInput(), null, loopMacroRef_g7vjva_a0a0a1a5a1a4a1a2a1a5a1a1, context9, environment.getGenerator()));
                      for (SNode itnode48 : loopList48) {
                        if (itnode48 == null) {
                          continue;
                        }
                        boolean inputChanged48 = context9.getInput() != itnode48;
                        try {
                          if (inputChanged48) {
                            environment.getTracer().pushInputNode(itnode48);
                          }
                          TemplateContext context48 = context9.subContext("parametersFromExpressions", itnode48);
                          final SNode tnode49 = new SNode(environment.getOutputModel(), "jetbrains.mps.baseLanguage.structure.ParameterDeclaration", false);
                          try {
                            environment.getTracer().pushTemplateNode(templateNode_g7vjva_a0a0a3a2a2a1a5a1a4a1a2a1a5a1a1);
                            environment.nodeCopied(context48, tnode49, "tpl/r:00000000-0000-4000-0000-011c8959034c/937236280924643192");
                            tnode49.setProperty("name", TemplateUtil.asString(QueriesGenerated.propertyMacro_GetPropertyValue_937236280924643241(environment.getOperationContext(), new PropertyMacroContext(context48.getInput(), "a", propertyMacro_g7vjva_c0b0b0a2a3a2a2a1a5a1a4a1a2a1a5a1a1, context48, environment.getGenerator()))));

                            {
                              final SNode tnode50 = new SNode(environment.getOutputModel(), "jetbrains.mps.baseLanguage.structure.ClassifierType", false);
                              try {
                                environment.getTracer().pushTemplateNode(templateNode_g7vjva_a0a0a1a4a3a2a2a1a5a1a4a1a2a1a5a1a1);
                                environment.nodeCopied(context48, tnode50, "tpl/r:00000000-0000-4000-0000-011c8959034c/937236280924643193");
                                tnode50.addReference(SReference.create("classifier", tnode50, SModelReference.fromString("f:java_stub#6354ebe7-c22a-4a0f-ac54-50b52ab9b065#java.lang(JDK/java.lang@java_stub)"), SNodeId.fromString("~Object")));

                              } finally {
                                environment.getTracer().pushOutputNode(tnode50);
                                environment.getTracer().closeTemplateNode(templateNode_g7vjva_a0a0a1a4a3a2a2a1a5a1a4a1a2a1a5a1a1);
                              }
                              if (tnode50 != null) {
                                tnode49.addChild("type", tnode50);
                              }
                              // TODO validate child 
                            }
                          } finally {
                            environment.getTracer().pushOutputNode(tnode49);
                            environment.getTracer().closeTemplateNode(templateNode_g7vjva_a0a0a3a2a2a1a5a1a4a1a2a1a5a1a1);
                          }
                          if (tnode49 != null) {
                            environment.registerLabel(itnode48, tnode49, "parametersFromExpressions");
                            tlist48.add(tnode49);
                          }
                        } finally {
                          if (inputChanged48) {
                            environment.getTracer().closeInputNode(itnode48);
                          }
                        }
                      }
                    } finally {
                      environment.getTracer().closeMacro(loopMacroRef_g7vjva_a0a0a1a5a1a4a1a2a1a5a1a1);
                    }
                    for (SNode child51 : TemplateUtil.asNotNull(tlist48)) {
                      tnode11.addChild("parameter", child51);
                    }
                    // TODO validate child 
                  }
                  {
                    final SNode tnode52 = new SNode(environment.getOutputModel(), "jetbrains.mps.baseLanguage.structure.PublicVisibility", false);
                    try {
                      environment.getTracer().pushTemplateNode(templateNode_g7vjva_a0a0a1a6a1a4a1a2a1a5a1a1);
                      environment.nodeCopied(context9, tnode52, "tpl/r:00000000-0000-4000-0000-011c8959034c/937236280924643286");

                    } finally {
                      environment.getTracer().pushOutputNode(tnode52);
                      environment.getTracer().closeTemplateNode(templateNode_g7vjva_a0a0a1a6a1a4a1a2a1a5a1a1);
                    }
                    if (tnode52 != null) {
                      tnode11.addChild("visibility", tnode52);
                    }
                    // TODO validate child 
                  }
                  {
                    final SNode tnode53 = new SNode(environment.getOutputModel(), "jetbrains.mps.lang.smodel.structure.SNodeType", false);
                    try {
                      environment.getTracer().pushTemplateNode(templateNode_g7vjva_a0a0a1a7a1a4a1a2a1a5a1a1);
                      environment.nodeCopied(context9, tnode53, "tpl/r:00000000-0000-4000-0000-011c8959034c/937236280924643287");

                    } finally {
                      environment.getTracer().pushOutputNode(tnode53);
                      environment.getTracer().closeTemplateNode(templateNode_g7vjva_a0a0a1a7a1a4a1a2a1a5a1a1);
                    }
                    if (tnode53 != null) {
                      tnode11.addChild("returnType", tnode53);
                    }
                    // TODO validate child 
                  }
                } finally {
                  environment.getTracer().pushOutputNode(tnode11);
                  environment.getTracer().closeTemplateNode(templateNode_g7vjva_a0a0a1a4a1a2a1a5a1a1);
                }
                if (tnode11 != null) {
                  tnode10.addChild("method", tnode11);
                }
                // TODO validate child 
              }
              {
                final SNode tnode54 = new SNode(environment.getOutputModel(), "jetbrains.mps.baseLanguage.structure.PublicVisibility", false);
                try {
                  environment.getTracer().pushTemplateNode(templateNode_g7vjva_a0a0a1a5a1a2a1a5a1a1);
                  environment.nodeCopied(context9, tnode54, "tpl/r:00000000-0000-4000-0000-011c8959034c/937236280924642825");

                } finally {
                  environment.getTracer().pushOutputNode(tnode54);
                  environment.getTracer().closeTemplateNode(templateNode_g7vjva_a0a0a1a5a1a2a1a5a1a1);
                }
                if (tnode54 != null) {
                  tnode10.addChild("visibility", tnode54);
                }
                // TODO validate child 
              }
              {
                final SNode tnode55 = new SNode(environment.getOutputModel(), "jetbrains.mps.baseLanguage.structure.ConstructorDeclaration", false);
                try {
                  environment.getTracer().pushTemplateNode(templateNode_g7vjva_a0a0a1a6a1a2a1a5a1a1);
                  environment.nodeCopied(context9, tnode55, "tpl/r:00000000-0000-4000-0000-011c8959034c/937236280924642826");

                  {
                    final SNode tnode56 = new SNode(environment.getOutputModel(), "jetbrains.mps.baseLanguage.structure.VoidType", false);
                    try {
                      environment.getTracer().pushTemplateNode(templateNode_g7vjva_a0a0a1a3a1a6a1a2a1a5a1a1);
                      environment.nodeCopied(context9, tnode56, "tpl/r:00000000-0000-4000-0000-011c8959034c/937236280924642827");

                    } finally {
                      environment.getTracer().pushOutputNode(tnode56);
                      environment.getTracer().closeTemplateNode(templateNode_g7vjva_a0a0a1a3a1a6a1a2a1a5a1a1);
                    }
                    if (tnode56 != null) {
                      tnode55.addChild("returnType", tnode56);
                    }
                    // TODO validate child 
                  }
                  {
                    final SNode tnode57 = new SNode(environment.getOutputModel(), "jetbrains.mps.baseLanguage.structure.PublicVisibility", false);
                    try {
                      environment.getTracer().pushTemplateNode(templateNode_g7vjva_a0a0a1a4a1a6a1a2a1a5a1a1);
                      environment.nodeCopied(context9, tnode57, "tpl/r:00000000-0000-4000-0000-011c8959034c/937236280924642828");

                    } finally {
                      environment.getTracer().pushOutputNode(tnode57);
                      environment.getTracer().closeTemplateNode(templateNode_g7vjva_a0a0a1a4a1a6a1a2a1a5a1a1);
                    }
                    if (tnode57 != null) {
                      tnode55.addChild("visibility", tnode57);
                    }
                    // TODO validate child 
                  }
                  {
                    final SNode tnode58 = new SNode(environment.getOutputModel(), "jetbrains.mps.baseLanguage.structure.StatementList", false);
                    try {
                      environment.getTracer().pushTemplateNode(templateNode_g7vjva_a0a0a1a5a1a6a1a2a1a5a1a1);
                      environment.nodeCopied(context9, tnode58, "tpl/r:00000000-0000-4000-0000-011c8959034c/937236280924642829");

                    } finally {
                      environment.getTracer().pushOutputNode(tnode58);
                      environment.getTracer().closeTemplateNode(templateNode_g7vjva_a0a0a1a5a1a6a1a2a1a5a1a1);
                    }
                    if (tnode58 != null) {
                      tnode55.addChild("body", tnode58);
                    }
                    // TODO validate child 
                  }
                } finally {
                  environment.getTracer().pushOutputNode(tnode55);
                  environment.getTracer().closeTemplateNode(templateNode_g7vjva_a0a0a1a6a1a2a1a5a1a1);
                }
                if (tnode55 != null) {
                  tnode10.addChild("constructor", tnode55);
                }
                // TODO validate child 
              }
            } finally {
              environment.getTracer().pushOutputNode(tnode10);
              environment.getTracer().closeTemplateNode(templateNode_g7vjva_a0a0a1a2a1a5a1a1);
            }
            tlist9 = TemplateUtil.singletonList(tnode10);
            environment.registerLabel(context.getInput(), tnode10, "quotationClass");
          }

        } finally {
          environment.getTracer().closeMacro(ifMacroRef_g7vjva_a0a0a1a5a1a1);
        }
        for (SNode child59 : TemplateUtil.asNotNull(tlist9)) {
          tnode1.addChild("innerClass", child59);
        }
        // TODO validate child 
      }
    } finally {
      environment.getTracer().pushOutputNode(tnode1);
      environment.getTracer().closeTemplateNode(templateNode_g7vjva_a0a0a1a1);
    }
    return tnode1;
  }

  public Collection<SNode> apply(@NotNull TemplateExecutionEnvironment environment, @NotNull TemplateContext context) throws GenerationException {
    return TemplateUtil.singletonList(applyPart0(environment, context));
  }

  public Collection<SNode> weave(@NotNull TemplateExecutionEnvironment environment, @NotNull TemplateContext context, @NotNull SNode outputContextNode) throws GenerationException {
    SNode tnodepart0 = applyPart0(environment, context);
    SNodePointer weaveTf0 = weaveTfConst_g7vjva_a0b0d;
    environment.weaveNode(outputContextNode, "contentNode", tnodepart0, weaveTf0, context.getInput());
    return TemplateUtil.singletonList(tnodepart0);
  }
}
