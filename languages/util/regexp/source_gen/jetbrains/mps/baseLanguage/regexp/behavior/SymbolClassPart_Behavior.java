package jetbrains.mps.baseLanguage.regexp.behavior;

/*Generated by MPS */

import jetbrains.mps.smodel.SNode;

public class SymbolClassPart_Behavior {
  public static void init(SNode thisNode) {
  }

  public static String call_validateChar_8173814113624732613(SNode thisNode, String s) {
    StringBuilder sb = new StringBuilder();
    int i = 0;
    char c = s.charAt(i);
    if (c == '\\') {
      sb.append(c);
      if (++i >= s.length()) {
        return null;
      }
      c = s.charAt(i);
      if (c == 'u') {
        sb.append(c);
        for (int e = 0; e < 4; e++) {
          if (++i >= s.length()) {
            return null;
          }
          c = s.charAt(i);
          if (!(StringLiteralRegexp_Behavior.call_isHexChar_8330008649152995338(thisNode, c))) {
            return null;
          }
          sb.append(c);
        }
      } else if (Character.isDigit(c)) {
        sb.append(c);
        for (int e = 0; e < 2; e++) {
          if (++i >= s.length()) {
            return null;
          }
          c = s.charAt(i);
          if (!(Character.isDigit(c))) {
            return null;
          }
          sb.append(c);
        }
      } else if (c == 'n' || c == 't' || c == 'b' || c == 'f' || c == 'r' || c == '"' || c == '\'' || c == '\\') {
        sb.append(c);
      } else {
        return null;
      }
    } else if (c < 32) {
      return null;
    } else if (c < 128) {
      if (c == '-' || c == '(' || c == ')' || c == '[' || c == ']' || c == '{' || c == '}' || c == '+' || c == '*' || c == '?' || c == '|' || c == '^' || c == '.' || c == '$') {
        sb.append('\\');
      }
      sb.append(c);
    } else {
      sb.append("\\u");
      String val = Integer.toString(c, 16);
      sb.append("0000".substring(val.length()) + val);
    }
    i++;
    if (i != s.length()) {
      return null;
    }
    return sb.toString();
  }

  public static String call_escapeChar_8173814113624637238(SNode thisNode, String s) {
    String res = SymbolClassPart_Behavior.call_validateChar_8173814113624732613(thisNode, s);
    if (res == null) {
      if (s.equals("\\")) {
        return "\\\\";
      }
      return "\\?";
    }
    return res;
  }
}
