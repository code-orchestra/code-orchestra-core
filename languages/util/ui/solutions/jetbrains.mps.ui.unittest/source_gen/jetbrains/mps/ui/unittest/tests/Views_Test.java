package jetbrains.mps.ui.unittest.tests;

/*Generated by MPS */

import junit.framework.Assert;
import jetbrains.mps.ui.unittest.mockup.MockWidget;
import jetbrains.mps.baseLanguage.closures.runtime._FunctionTypes;
import jetbrains.mps.ui.unittest.mockup.MockPropChngHandler;
import org.custommonkey.xmlunit.XMLAssert;

public class Views_Test extends UITestBase_Test {
  public void test_simpleViewBinding() throws Exception {
    final FooBean fb = new FooBean();
    fb.setFoo("bar");
    Assert.assertEquals("bar", fb.getFoo());
    MockWidget mw = new _FunctionTypes._return_P0_E0<MockWidget>() {
      public MockWidget invoke() {
        final MockWidget widget_8hs0sh_a0a0a0a3a0a = new MockWidget();
        widget_8hs0sh_a0a0a0a3a0a.setProp("id", "1234");
        widget_8hs0sh_a0a0a0a3a0a.setProp("foo", fb.getFoo());
        widget_8hs0sh_a0a0a0a3a0a.addPropHanler("foo", new MockPropChngHandler() {
          public void handle(MockWidget wdg, String propKey) {
            new _FunctionTypes._void_P1_E0<String>() {
              public void invoke(String value) {
                fb.setFoo(value);
              }
            }.invoke(wdg.getProp(propKey));
          }
        });
        return widget_8hs0sh_a0a0a0a3a0a;
      }
    }.invoke();

    XMLAssert.assertXMLEqual("<widget id=\"1234\" foo=\"bar\" />", this.toString(mw));
    this.setUIProperty(mw, "foo", "doh");
    XMLAssert.assertXMLEqual("<widget id=\"1234\" foo=\"doh\" />", this.toString(mw));
    Assert.assertEquals("doh", fb.getFoo());
  }
}
